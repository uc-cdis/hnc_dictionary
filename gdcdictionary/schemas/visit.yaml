$schema: "http://json-schema.org/draft-04/schema#"

id: "visit"
title: Visit
type: object
nodeTerms: null
namespace: https://imaging-hub.data-commons.org
category: clinical
program: '*'
project: '*'
description: This table contains events where subjects engage with the healthcare system for a duration of time. They are often also called “encounters”. Visits are defined by a configuration of circumstances under which they occur, such as (i) whether the patient comes to a healthcare institution, the other way around, or the interaction is remote, (ii) whether and what kind of trained medical staff is delivering the service during the Visit, and (iii) whether the Visit is transient or for a longer period involving a stay in bed.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: subject
    backref: visit
    label: member_of
    target_type: subject
    multiplicity: many_to_one
    required: true

required:
  - submitter_id
  - type
  - subject

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

properties:

  $ref: "_definitions.yaml#/ubiquitous_properties"

  subject:
    description: The submitter_id or id of the subject this visit belongs to, i.e., a link to a record in the parent node.
    $ref: "_definitions.yaml#/to_many"
